<html>
  <head>
    <title>Levels</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="../../dist/aframe-audio-analyser.umd.js"></script>

    <script src="https://unpkg.com/aframe-entity-generator-component@^3.0.0/dist/aframe-entity-generator-component.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script>

    <script src="../components/audioanalyser-levels-scale.js"></script>
    <script src="../components/scale-y-color.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <a-mixin
          id="bar"
          geometry="primitive: box"
          material="color: black"
          scale-y-color="from: 10 60 10; to: 180 255 180; maxScale: 15"
        ></a-mixin>
        <audio id="song" autoplay loop src="../songs/vibe.mp3"></audio>
      </a-assets>

      <!--Audio Analyser-->
      <a-entity
        audioanalyser="src: #song; smoothingTimeConstant: 0.9"
        audioanalyser-levels-scale="max: 50; multiplier: 0.06"
        entity-generator="mixin: bar; num: 64"
        layout="type: circle; radius: 10; plane: xz;"
      ></a-entity>

      <!--Environment-->
      <a-light type="ambient" color="#222"></a-light>
      <a-light type="point" position="0 1 0" intensity="2"></a-light>
      <a-circle color="#333" opacity="0.8" rotation="-90 0 0" radius="12" roughness="1"></a-circle>
      <a-sky color="#222"></a-sky>
    </a-scene>
  </body>
</html>
